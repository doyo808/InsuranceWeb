<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{/admin/common/layout}">

<head>
  <title>고객 문의 답변</title>
  <th:block layout:fragment="extraHead">
    <!-- 페이지 전용 CSS -->
    <link rel="stylesheet" th:href="@{/admin/css/inquiryAnswer.css}" />
  </th:block>
</head>

<body>
  <main layout:fragment="adminContent">
    <!-- 타이틀 & 상단 액션 -->
    <div class="title-row">
      <h1 class="page-title">고객 문의 답변</h1>

      <div class="title-actions">
        <a th:href="@{/admin/inquiry}"
           class="btn btn--outline">
          ← 이전
        </a>
      </div>
    </div>

    <!-- 문의 내용 -->
    <section class="card card--padded">
      <h2 class="section__title">문의 내용</h2>

      <div class="detail-grid">
        <div class="detail-grid__label">제목</div>
        <div class="detail-grid__value" th:text="${inquiry.title}">안심플러스 운전자 보험 보장 내역 관련 문의</div>

        <div class="detail-grid__label">고객명</div>
        <div class="detail-grid__value">
          <span th:text="${inquiry.customerName}">김철수</span>
          <span class="muted" th:text="'(' + ${inquiry.inquiryNo} + ')'"> (CS2024-001)</span>
        </div>

        <div class="detail-grid__label">문의 유형</div>
        <div class="detail-grid__value" th:text="${inquiry.type}">상품 문의</div>

        <div class="detail-grid__label">문의 날짜</div>
        <div class="detail-grid__value" th:text="${#temporals.format(inquiry.createdAt, 'yyyy-MM-dd')}">2024-07-28</div>

        <div class="detail-grid__label">내용</div>
        <div class="detail-grid__value">
          <p class="paragraph" th:text="${inquiry.content}">
            경미한 사고 시에도 보장 되는지, 제출 서류는 무엇인지 궁금합니다.
          </p>
        </div>

        <div class="detail-grid__label">첨부 파일</div>
        <div class="detail-grid__value">
          <ul class="file-list">
            <li th:each="file : ${inquiry.attachments}">
              <a class="file-link" th:href="@{/admin/inquiry/file/{id}(id=${file.id})}"
                 th:text="${file.originalName}">참고_이미지_01.jpg</a>
            </li>
            <!-- 첨부 없을 때 -->
            <li class="muted" th:if="${#lists.isEmpty(inquiry.attachments)}">첨부 없음</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- 답변 작성 -->
    <section class="card card--padded">
      <h2 class="section__title">답변 작성</h2>

      <form th:action="@{/admin/inquiry/{id}/answer(id=${inquiry.id})}"
            method="post" class="answer-form">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

        <textarea name="answer"
                  class="answer-textarea"
                  rows="10"
                  placeholder="답변을 입력하세요..."
                  th:text="${inquiry.answerDraft}"></textarea>

        <div class="form-actions">
          <button type="submit" class="btn btn--primary">답변 등록</button>
          <button type="reset" class="btn btn--outline">초기화</button>
        </div>
      </form>
    </section>
  </main>
</body>
</html>
