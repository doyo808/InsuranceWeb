<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>보험상품 등록/수정</title>
  <link rel="stylesheet" th:href="@{/mall/css/insurance-form.css}" />
</head>
<body>

  <h2 th:text="${product.p_id == null ? '신규 등록' : '수정하기'}"></h2>

  <form method="post" th:action="@{/admin/insurance/save}">
    <input type="hidden" th:if="${product.p_id}" name="p_id" th:value="${product.p_id}" />

    <!-- 기본 정보 -->
    <div class="form-section">
      <label>제목</label>
	  <span class="form-desc"></span>
      <input type="text" name="title" th:value="${product.title}" />

      <label>뱃지</label>
	  <span class="form-desc">선택적으로 제목 옆에 뱃지를 달수있는 부분입니다.<br>특별한게 없으면 비워두심됩니다.</span>
      <input type="text" name="badge" th:value="${product.badge}" />

      <label>서브 타이틀</label>
	  <span class="form-desc"></span>
      <input type="text" name="subtitle" th:value="${product.subtitle}" />

      <label>설명</label>
	  <span class="form-desc"></span>
      <textarea name="descriptions" rows="3" th:text="${product.descriptions}"></textarea>

      <label>브레드크럼</label>
	  <span class="form-desc"></span>
      <input type="text" name="breadcrumb" th:value="${product.breadcrumb}" />

      <label>메인버튼</label>
	  <span class="form-desc"></span>
      <input type="text" name="main_button_text" th:value="${product.main_button_text}" />

      <label>이미지 URL</label>
	  <span class="form-desc"></span>
      <input type="text" name="top_image" th:value="${product.top_image}" />
    </div>

    <!-- 탭 목록 -->
    <div class="form-section">
      <label>탭 목록</label>
	  <span class="form-desc">
		해당 탭에 내용을 적는 곳입니다.<br>
		탭 이름과 본문을 적어 두시면 됩니다.<br>
		내용이 하나라면 탭명은 넘어가셔도 됩니다.
	  </span>
      <div id="tabsContainer">
		<label>탭 이름</label>
	      <input type="text" value="${tab.name || ''}" onchange="importTabs().then(m => m.tabsData[`${index}`].name = this.value)" />
	      <button type="button" class="btn-outline" onclick="importTabs().then(m => { m.removeTab(`${index}`); })">삭제</button>
	  </div>
      <button type="button" class="btn-outline" onclick="addTab()">+ 탭 추가</button>
      <input type="hidden" name="tabs_json" id="tabs_json" />
    </div>

    <!-- 섹션 목록 -->
    <div class="form-section">
      <label>섹션 목록</label>
	  <span class="form-desc"></span>
      <div id="sectionsContainer"></div>
      <button type="button" class="btn-outline" onclick="addSection()">+ 섹션 추가</button>
      <input type="hidden" name="sections_json" id="sections_json" />
    </div>

    <!-- 하단 버튼 목록 -->
    <div class="form-section">
      <label>하단 버튼 목록</label>
	  <span class="form-desc"></span>
      <div id="buttonsContainer"></div>
      <button type="button" class="btn-outline" onclick="addButton()">+ 버튼 추가</button>
      <input type="hidden" name="bottom_buttons_json" id="bottom_buttons_json" />
    </div>

    <button type="submit" class="btn">저장</button>
    <a th:href="@{/admin/insurance}" class="btn btn-outline">목록</a>
  </form>

  <script type="module" th:src="@{/mall/js/insurance-form.js}"></script>

</body>
</html>
